<!DOCTYPE html>
<html lang="en">

<head>
        <link rel="icon" type="image/x-icon"
       href="https://d1nxzqpcg2bym0.cloudfront.net/google_play/com.anime.flv/ec0213b8-f1d8-11e7-8b0a-7d62278fee98/128x128">
    <title>Watch {{ TITLE }} - animeflv</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Watch {{ TITLE }} - animeflv">
    <meta name="description"
        content="Watch {{ TITLE }} free anime online and it's latest episodes on animeflv. We provide free anime online experience without ads, signing up or downloading.">
    <meta name="keywords"
        content="{{ TITLE }},animeflv, hindi dub, hindi sub, english dub, watch anime online, free anime, anime stream, anime hd, english sub, kissanime, gogoanime, animeultima, 9anime, 123animes, animefreak, vidstreaming, gogo-stream, animekisa, zoro.to, gogoanime.run, animefrenzy, animekisa">
    <meta name="charset" content="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="revisit-after" content="1 days">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Language" content="en">
    <meta property="og:title" content="Watch {{ TITLE }} - animeflv">
    <meta property="og:description"
        content="Watch {{ TITLE }} free anime online and it's latest episodes on animeflv. We provide free anime online experience without ads, signing up or downloading.">
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="animeflv">
    <meta property="og:url" content="{{ URL }}">
    <meta property="twitter:title" content="Watch {{ TITLE }} - animeflv">
    <meta property="twitter:description"
        content="Watch {{ TITLE }} free anime online and it's latest episodes on animeflv. We provide free anime online experience without ads, signing up or downloading.">
    <meta property="twitter:url" content="{{ URL }}">
    <meta property="twitter:card" content="summary">
    <meta name="apple-mobile-web-app-status-bar" content="#202125">
	<meta name="apple-mobile-web-app-capable" content="yes">

    <meta name="theme-color" content="#202125">
         <link href="../static/css/styles.css" rel="stylesheet">
    <link href="../static/css/anime.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <script type = "module" src = "script.js"></script> 
    <style>
        #cover {
            background-image: url('{{ IMG }}');
        }
	 body{
		 background: #000000;
	    }
.ep-btn {
    padding: 10px 20px;
    background-color: rgb(53, 55, 61);
    color: #999;
    text-decoration: none;
    border-radius: 4px;
    font-weight: 400;
    font-family: 'Montserrat', sans-serif;
    font-size: 14px;
    margin: 0px 2px;
    margin-bottom: 10px;
    width: 63px;
}

.divo2 {
 {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(0, 1fr));
  gap: 10px;
}
}

    </style>
</head>

<body>
<nav>
         <div class="menu-icon">
            <span class="fas fa-bars"></span>
         </div>
         <div class="logo">
            <a href="#"><img src="../static/img/animeflv.png"></a>
         </div>
         <div class="nav-items">
		  <li><a href="/">Home</a></li>
             <li><a href="../static/css/bookmark.html">Bookmark</a></li>
        <li><a href="../static/css/watchlist.html">Watchlist</a></li>
         </div>
         <div class="search-icon">
            <span class="fas fa-search"></span>
         </div>
         <div class="cancel-icon">
            <span class="fas fa-times"></span>
         </div>
                    <form action="/search" method='GET'>
                <input type="text" name="query" id="query" placeholder="Search Anime..." required>
                <button type="submit"><i class="fa fa-search"></i>
                </button>
            </form>
        </div>
      </nav>
    <section>
        <div id="background">
            <div id="cover"></div>
        </div>
        <div class="anime row">
            <div class="poster col-3">
                <img src="{{ IMG }}">
            </div>
<div class="details col-6">
    <h1>{{ TITLE }}</h1>
    <div class="mid" style="margin: 20px 0px;">
        <span class="cbox">HD</span>
        <span class="cbox">{{ LANG }}</span>
        <span class="dot"></span>
        <span class="year">{{ TYPE }}</span>
    </div>
<div id="watchh" class="mid">
        <a href="{{ WATCHNOW }}" class="watch-btn" style="display: inline-block; padding: 10px 20px; font-size: 20px; border-radius: 50px;">
         <i class="fa fa-play"></i> Watch Now
        </a>
        <button id="addToListBtn" onclick="addToWatchList('{{ WATCHNOW }}', '{{ IMG }}', '{{ TITLE }}')" style="display: inline-block; padding: 10px 20px; font-size: 20px; border-radius: 50px;">
         <i class="fa fa-plus"></i> Add to List
        </button>
    </div>           


    <div id="overview3" class="synopsis">
        SYNOPSIS
    </div>
</div>


            <div id="info" class="col-3">
                <div class="info-items overview">
                    <span id="overview2" class="item-head">Overview:</span>
                    <span id="overview1" class="item-des">SYNOPSIS</span>
                </div>

                <div class=info-items>
                    <span class="item-head">Other Names:</span>
                    <span class="item-des">{{ OTHER }}</span>
                </div>
                <div class=info-items>
                    <span class="item-head">Episodes:</span>
                    <span class="item-des">{{ TOTAL }}</span>
                </div>
                <div class=info-items>
                    <span class="item-head">Release Year:</span>
                    <span class="item-des">{{ YEAR }}</span>
                </div>
                <div class=info-items>
                    <span class="item-head">Type:</span>
                    <span class="item-des">{{ TYPE }}</span>
                </div>
                <div class=info-items>
                    <span class="item-head">Status:</span>
                    <span class="item-des">{{ STATUS }}</span>
                </div>
                <div class=info-items>
                    <span class="item-head">Studios:</span>
                    <span class="item-des">{{ STUDIO }}</span>
                </div>

                <div class="info-items genre">
                    <span class="item-head">Genres:</span> GENERES
                </div>



            </div>
        </div>
    </section>

    <section id="watch">
        <div class="divo">
            <h2>List Of Episodes:</h2>
            <div class="divo2">
                EPISODES
            </div>
        </div>

    </section>

    <section>
        <div class="divox">
            <h2 id="latest">Similar Animes</h2>
            <div id="latest2">
                DISPLAY_ANIME
            </div>
        </div>
    </section>
	<hr>
    <footer>
        <div>
            <p style="color:white;">Animixplay All rights reserved Â© Animixplay</p>
        </div>
    </footer>
    <hr>
<script>	
document.addEventListener("DOMContentLoaded", function () {
    const imageObserver = new IntersectionObserver((entries, imgObserver) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                const lazyImage = entry.target;
                lazyImage.src = lazyImage.dataset.src;
            }
        })
    });
    const arr = document.querySelectorAll('img.lzy_img');
    arr.forEach((v) => {
        imageObserver.observe(v);
    });
})
function addToWatchList(link, img, title) {
    // Check if all arguments are valid
    if (!link || !img || !title) {
        alert("Missing argument. Please provide a link, image, and title for the anime.");
        return;
    }

    // Create an object with the anime data
    const anime = { link, img, title };

    // Get the current watchlist and completedList from local storage or create an empty array
    let watchlist = JSON.parse(localStorage.getItem("watchlist")) || [];
    let completedList = JSON.parse(localStorage.getItem("completedList")) || [];

    // Check if the anime already exists in the watchlist or completedList
    const watchlistExists = watchlist.some((item) => item.link === link);
    const completedListExists = completedList.some((item) => item.link === link);

    // If the anime is already in the completedList, show an alert and return
    if (completedListExists) {
        alert(`${title} is already in your completed list.`);
        return;
    }

    // If the anime is already in the watchlist, show an alert and return
    if (watchlistExists) {
        alert(`${title} is already in your watchlist.`);
        return;
    }

    // Add the anime to the beginning of the watchlist
    watchlist.unshift(anime);

    // Store the updated watchlist in local storage
    localStorage.setItem("watchlist", JSON.stringify(watchlist));

    // Show an alert to confirm the anime was added
    alert(`${title} has been added to your watchlist.`);
}

   
// Restore the last episode watched when the "Watch Now" button is clicked
const watchNowBtn = document.querySelector('.watch-btn');
watchNowBtn.addEventListener('click', function() {
    const lastEpisode = localStorage.getItem("lastEpisode");
    if (lastEpisode) {
        window.location.href = lastEpisode;
    }
});

// Add active class to the current link
var header = document.getElementById("header");
var links = header.getElementsByClassName("menu")[0].getElementsByTagName("a");
for (var i = 0; i < links.length; i++) {
    links[i].addEventListener("click", function() {
        var current = document.getElementsByClassName("active");
        if (current.length > 0) {
            current[0].className = current[0].className.replace(" active", "");
        }
        this.className += " active";
    });
}

 </script>

	<script>
const menuBtn = document.querySelector(".menu-icon span"); 
const searchBtn = document.querySelector(".search-icon"); 
const cancelBtn = document.querySelector(".cancel-icon"); 
const items = document.querySelector(".nav-items"); 
const form = document.querySelector("form"); 

menuBtn.onclick = () => { 
  items.classList.add("active"); 
  menuBtn.classList.add("hide"); 
  searchBtn.classList.add("hide"); 
  cancelBtn.classList.add("show"); 
  document.body.style.overflow = "hidden"; // prevent scrolling 
}

cancelBtn.onclick = () => { 
  items.classList.remove("active"); 
  menuBtn.classList.remove("hide"); 
  searchBtn.classList.remove("hide"); 
  cancelBtn.classList.remove("show"); 
  form.classList.remove("active"); 
  cancelBtn.style.color = "#ff3d00"; 
  document.body.style.overflow = "auto"; // enable scrolling 
}

searchBtn.onclick = () => { 
  form.classList.add("active");		 
  form.style.display = "inline-block"; // or "flex" 
  searchBtn.classList.add("hide"); 
  cancelBtn.classList.add("show"); 
  document.body.style.overflow = "hidden"; // prevent scrolling 
}
	</script>
</body>

</html>
